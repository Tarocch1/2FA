(this.webpackJsonpmfa=this.webpackJsonpmfa||[]).push([[0],{283:function(e,t,n){e.exports=n(572)},326:function(e,t,n){},333:function(e,t){},335:function(e,t){},346:function(e,t){},348:function(e,t){},375:function(e,t){},377:function(e,t){},378:function(e,t){},384:function(e,t){},386:function(e,t){},404:function(e,t){},407:function(e,t){},423:function(e,t){},426:function(e,t){},572:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getKeys",(function(){return g}));var r=n(0),c=n.n(r),o=n(15),i=n.n(o),u=n(21),l=n(276),s=n(130),f=n(98),m=n.n(f),d=n(133),p=n(252),h=n(253),v=n(280),b=n(176),y=n.n(b);var E="/key",g=function(){return function(e){var t=JSON.parse(window.localStorage.getItem("jwt")||"{}").token||"";return t&&(y.a.defaults.headers.common.Token=t),y()(e).then((function(e){return e.data})).catch((function(e){return{erred:!0,error:e}}))}({method:"get",baseURL:"https://mfa.api.tarocch1.com",url:E})},w=function(){function e(){Object(p.a)(this,e),this.keys=[],this.loading=!0}return Object(h.a)(e,[{key:"getKeys",value:function(){var e=Object(d.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getKeys();case 2:(t=e.sent).erred?v.b.error("\u83b7\u53d6\u5bc6\u94a5\u5931\u8d25"):this.keys=t,this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Object(s.a)(w);n(326);var j=n(78),k=n(573),O=n(101),x=n(55),I=n(576),S=n(42),C=n(577),K=n(575),B=n(574),R=n(578),T=n(99),J=n(140),A=n.n(J),G=0;var N=function(){var e=Object(s.b)(w),t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)(30),u=Object(j.a)(i,2),l=u[0],f=u[1],p=function(){var e=T.authenticator.timeRemaining();f(e),30===e&&h()},h=function(){var t=[];e.keys.forEach((function(e){t.push({name:e.name,token:T.authenticator.generate(e.key)})})),o(t)};Object(r.useEffect)((function(){return Object(d.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getKeys();case 2:h(),p(),G=window.setInterval(p,1e3);case 5:case"end":return t.stop()}}),t)})))(),function(){window.clearInterval(G)}}),[]);var b=[{title:"Name",dataIndex:"name"},{title:"Token",dataIndex:"token",width:100,align:"center"},{key:"action",title:"Action",width:100,align:"center",render:function(e,t,n){return c.a.createElement("a",{onClick:function(){return t=e.token,A()(t),void v.b.success("\u590d\u5236\u6210\u529f");var t}},"\u590d\u5236")}}];return c.a.createElement(O.a,{justify:"center"},c.a.createElement(x.a,{style:{maxWidth:1e3,flexGrow:1}},c.a.createElement(K.a,{bodyStyle:{padding:8},bordered:!1},c.a.createElement(B.a,{size:"middle",bordered:!0,title:function(){return c.a.createElement(R.a,{percent:100*(30-l)/30,format:function(){return"".concat(l,"s")}})},loading:e.loading,columns:b,dataSource:a,rowKey:"name",pagination:!1}))))},W=n(579),z=0;var F=function(){var e=Object(r.useRef)(null),t=Object(r.useState)(30),n=Object(j.a)(t,2),a=n[0],o=n[1],i=Object(r.useState)("000000"),u=Object(j.a)(i,2),l=u[0],s=u[1];Object(r.useEffect)((function(){return function(){window.clearInterval(z)}}),[]);var f=function(){var e=T.authenticator.timeRemaining();o(e),30===e&&m()},m=function(){s(T.authenticator.generate(e.current.input.value))};return c.a.createElement(O.a,{justify:"center"},c.a.createElement(x.a,{style:{marginBottom:8},span:24},c.a.createElement(W.a,{ref:e,placeholder:"key",onPressEnter:function(){window.clearInterval(z),e.current.input.value?(m(),f(),z=window.setInterval(f,1e3)):(o(30),s("000000"))}})),c.a.createElement(x.a,{style:{marginBottom:8},span:24},c.a.createElement(R.a,{percent:100*(30-a)/30,format:function(){return"".concat(a,"\u79d2")}})),c.a.createElement(x.a,null,c.a.createElement(I.a.Text,{copyable:!0},l)))};var H=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1];return c.a.createElement(k.a,null,c.a.createElement(k.a.Header,{style:{padding:"0 16px"}},c.a.createElement(O.a,{style:{height:"100%"},justify:"center",align:"middle"},c.a.createElement(x.a,{style:{maxWidth:1e3,flexGrow:1}},c.a.createElement(O.a,{justify:"space-between",align:"middle"},c.a.createElement(x.a,null,c.a.createElement(I.a.Title,{style:{color:"#fff",marginBottom:0},level:4},"MFA\u8ba4\u8bc1\u5de5\u5177")),c.a.createElement(x.a,null,c.a.createElement(S.a,{type:"primary",onClick:function(){return a(!0)}},"\u8ba1\u7b97\u5668")))))),c.a.createElement(k.a.Content,{style:{height:"calc(100vh - 64px)",padding:16,overflowY:"auto"}},c.a.createElement(N,null)),c.a.createElement(C.a,{destroyOnClose:!0,maskClosable:!1,title:"\u8ba1\u7b97\u5668",footer:null,visible:n,onCancel:function(){return a(!1)}},c.a.createElement(F,null)))};i.a.render(c.a.createElement(u.b,{locale:l.a},c.a.createElement(H,null)),document.getElementById("root"))}},[[283,1,2]]]);
//# sourceMappingURL=main.ff956289.chunk.js.map